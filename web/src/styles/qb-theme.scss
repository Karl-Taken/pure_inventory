@import url("https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap");

/* =========================
   THEME & GLOBAL VARIABLES
   ========================= */
:root{
  --accent: rgba(0, 188, 212, 1);
  --accent-weak: rgba(0, 188, 212, 0.16);
  --accent-lime: #00BCD4;
  --accent-lime-weak: rgba(0, 188, 212, 0.18);
  --accent-glow-45: rgba(0, 188, 212, 0.45);
  --accent-glow-28: rgba(0, 188, 212, 0.28);
  --accent-glow-24: rgba(0, 188, 212, 0.24);
  --accent-glow-22: rgba(0, 188, 212, 0.22);
  --accent-glow-08: rgba(0, 188, 212, 0.08);
  --accent-glow-04: rgba(0, 188, 212, 0.04);
  --accent-grad-35: rgba(0, 188, 212, 0.35);
  --accent-grad-28: rgba(0, 188, 212, 0.28);
  --accent-grad-22: rgba(0, 188, 212, 0.22);
  --accent-grad-20: rgba(0, 188, 212, 0.20);
  --accent-grad-16: rgba(0, 188, 212, 0.16);
  --accent-grad-12: rgba(0, 188, 212, 0.12);
  --accent-grad-0: rgba(0, 188, 212, 0);
  --accent-grad-top: #4DD0E1;
  --accent-grad-bottom: #0097A7;
  --accent-health-high: #00ACC1;

  --drag-border: #4DD0E1;
  --drag-shadow: rgba(0, 0, 0, 0.45);
  --drag-bg-top: rgba(12, 16, 18, 0.95);
  --drag-bg-bottom: rgba(11, 14, 16, 0.82);
  --drag-amount-bg: rgba(0, 0, 0, 0.65);

  --accent-label: #4DD0E1;
  --slot-hover-border: #3d4a4b;
  --slot-hover-outline: rgba(0, 0, 0, 0.55);
  --slot-has-item-border: #475253;

  --surface-0: rgba(18, 22, 24, 0.61);
  --surface-1: rgba(22, 26, 28, 0.527);
  --surface-2: rgba(27, 32, 34, 0.548);
  --slot-bg: rgba(16, 20, 22, 0.685);
  --slot-bg-2: rgba(12, 15, 16, 0.637);
  --slot-bdr: rgba(76,92,96,.55);
  --slot-edge: rgba(255,255,255,.10);
  --tx:#fff;
  --tx-dim:#c6cfcd;
  --warning:#ffd166;
  --danger:#ff6b6b;
  --bdr: rgba(255,255,255,.08);
  --card-bdr: rgba(255,255,255,.12);
  --shadow-card: 0 0.75rem 1.75rem rgba(0,0,0,.26);
  --shadow-slot: 0 0 0.625rem var(--accent-glow-28);
  --shadow-slot-glow: 0 0 0.75rem var(--accent-glow-28);
  --r-2: 0.625rem;
  --r-1: 0.375rem;
  --font: "Rajdhani", sans-serif;

  /* Unified sizing */
  --panel-w: 35rem;
  --panel-max-h: 86%;
  --grid-max-h: calc((6.3125rem * 4) + (0.75rem * 3));
  --grid-min-h: calc((5.625rem * 4) + (0.75rem * 3));
}

*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{font-family:var(--font);color:var(--tx);background:transparent;overflow:hidden;}
img{display:block;max-width:100%}
button{font-family:var(--font);cursor:pointer}

::-webkit-scrollbar{width:0.1875rem;height:0.1875rem}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--accent);border-radius:0.125rem}

#app{width:100vw;height:100vh}

/* =========================
   LAYOUT CONTAINERS
   ========================= */
.inventory-container{
  position:relative;width:100%;height:100%;
  perspective:100rem;perspective-origin:50% 50%;
}

.inventory-section{
  position:fixed;
  width:var(--panel-w);
  max-height:var(--panel-max-h);
  background:transparent;
  border:none;
  display:flex;
  flex-direction:column;
  overflow:visible;
}

/* LEFT */
.player-inventory-section{
  top:50%;
  left:3.125rem;
  transform-origin:right 50%;
}
.player-inventory-section.lean-left{
  transform:translateY(-50%) rotateY(8.5deg) translateX(0.375rem);
}

/* RIGHT WRAPPER (keeps tilt, no scale) */
.other-sections-wrapper{
  position:fixed;
  right:3.125rem;
  top:50%;
  transform:translateY(-50%);
  padding-right:0.625rem;
  z-index:90;
  perspective:100rem;
  transform-origin:left 50%;
  overflow:visible;
}
.other-sections-wrapper.lean-right{
  transform:translateY(-50%) rotateY(-8.5deg) translateX(-0.375rem);
}

/* unified inner sections on the right */
.other-sections-wrapper .other-inventory-section,
.other-sections-wrapper .other-backpack-section{
  position:relative;
  width:var(--panel-w);
  max-height:var(--panel-max-h);
  background:transparent;
  border:none;
  display:flex;
  flex-direction:column;
  overflow:visible;
  margin-bottom:1.125rem;
}

/* keep inner blocks unrotated so only wrapper tilts */
.other-sections-wrapper .other-inventory-section,
.other-sections-wrapper .other-backpack-section,
.other-sections-wrapper .other-utility-section{
  transform:none !important;
}

/* right utility col */
.other-sections-wrapper .other-utility-section{
  position:relative;
  width:var(--panel-w);
  display:flex;
  flex-direction:column;
  max-height:none;
}

.centered-inventory-section{
  left:50%!important;
  right:auto!important;
  transform:translate(-50%,-50%)!important;
  transform-origin:center center!important;
}

@media (max-width:75rem),(max-height:51.25rem){
  .player-inventory-section.lean-left{transform:translateY(-50%)!important}
  .other-sections-wrapper.lean-right{transform:translateY(-50%)!important}
}

/* =========================
   PANELS & HEADERS
   ========================= */
.player-inventory-section .inventory-header,
.other-inventory-section .inventory-header,
.other-backpack-section .inventory-header{
  margin:0;
  padding:0.75rem 1rem 0.625rem;
  background:var(--surface-0);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-2) var(--r-2) 0 0;
  box-shadow:var(--shadow-card);
  position:relative;
}
.player-inventory-section .inventory-header::after,
.other-inventory-section .inventory-header::after,
.other-backpack-section .inventory-header::after{
  content:"";
  position:absolute;
  left:1rem;
  right:1rem;
  bottom:0;
  height:0.1875rem;
  border-radius:0.125rem;
  background:linear-gradient(90deg,var(--accent) 0%,var(--accent-grad-35) 60%,var(--accent-grad-0) 100%);
}

/* unified grid heights both sides */
.player-inventory-section .inventory-grid,
.other-inventory-section .inventory-grid {
  background: var(--surface-1);
  border: 0.0625rem solid var(--card-bdr);
  border-top: none;
  border-radius: 0 0 var(--r-2) var(--r-2);
  padding: 0.625rem;
  box-shadow: var(--shadow-card);

  max-height: calc((6.5625rem * 4) + (0.75rem * 2)) !important;
  min-height: calc((5.625rem * 4) + (0.75rem * 2)) !important;
  overflow: auto !important;
}

.other-backpack-section .inventory-grid {
  background: var(--surface-1);
  border: 0.0625rem solid var(--card-bdr);
  border-top: none;
  border-radius: 0 0 var(--r-2) var(--r-2);
  padding: 0.625rem;
  box-shadow: var(--shadow-card);

  max-height: calc((6.3125rem * 3) + (0.75rem * 2)) !important;
  min-height: calc((5.625rem * 3) + (0.75rem * 2)) !important;
  overflow: auto !important;
}

/* backpack panel */
.backpack-section{
  margin-top:1.125rem;
  background:var(--surface-1);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-2);
  box-shadow:var(--shadow-card);
}
.backpack-header{
  padding:0.75rem 1rem 0.625rem;
  background:var(--surface-0);
  border-bottom:0.0625rem solid var(--bdr);
  border-radius:var(--r-2) var(--r-2) 0 0;
  position:relative;
}
.backpack-header::after{
  content:"";
  position:absolute;
  left:1rem;
  right:1rem;
  bottom:0;
  height:0.1875rem;
  border-radius:0.125rem;
  background:linear-gradient(90deg,var(--accent) 0%,var(--accent-grad-35) 60%,var(--accent-grad-0) 100%);
}
.backpack-grid{padding:0.625rem;max-height:21.25rem;overflow:auto}

/* =========================
   RIGHT UTILITY STRIP
   ========================= */
.other-utility-section .utility-header{
  margin:0;
  padding:0.625rem 1rem;
  background:var(--surface-0);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-2) var(--r-2) 0 0;
  box-shadow:var(--shadow-card);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:0.375rem;
  color:var(--accent);
  font-size:0.6875rem;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:0.0375rem;
  position:relative;
}
.other-utility-section .utility-header::after{
  content:"";
  position:absolute;
  left:1rem;
  right:1rem;
  bottom:0;
  height:0.1875rem;
  border-radius:0.125rem;
  background:linear-gradient(90deg,var(--accent) 0%,var(--accent-grad-35) 60%,var(--accent-grad-0) 100%);
}
.other-utility-section .utility-slots{
  background:var(--surface-1);
  border:0.0625rem solid var(--card-bdr);
  border-top:none;
  border-radius:0 0 var(--r-2) var(--r-2);
  padding:0.625rem;
  box-shadow:var(--shadow-card);
  display:flex;
  gap:0.5rem;
  justify-content:center;
  flex-wrap:wrap;
}

/* bottom utility bar (center) */
.utility-inventory-section{
  position:fixed;
  left:50%;
  bottom:4.375rem;
  transform:translateX(-50%);
  z-index:85;
  width:auto;
  padding:0.3125rem;
  background:var(--surface-0);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-1);
  box-shadow:var(--shadow-card);
}
.utility-inventory-section .utility-header{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:0.375rem;
  color:var(--accent);
  font-size:0.6875rem;
  font-weight:900;
  text-transform:uppercase;
  margin-bottom:0.625rem;
  letter-spacing:0.0375rem;
}
.utility-inventory-section .utility-slots{display:flex;gap:0.5rem;justify-content:center}

/* =========================
   HEADER CONTENT
   ========================= */
.header-content{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.375rem}
.inventory-title{
  display:flex;
  align-items:center;
  gap:0.625rem;
  color:#fff;
  font-weight:800;
  letter-spacing:0.05625rem;
  text-transform:uppercase;
  font-size:0.875rem;
}
.inventory-title i,
.inventory-title .inventory-badge{
  width:2rem;
  height:2rem;
  display:grid;
  place-items:center;
  clip-path:polygon(25% 6%,75% 6%,100% 50%,75% 94%,25% 94%,0 50%);
  box-shadow:inset 0 0 0 0.125rem rgba(0,0,0,.14),0 0.125rem 0.5rem rgba(0,0,0,.28);
  border-radius:0.125rem;
  font-size:0;
  line-height:0;
  color:transparent;
  background-color:var(--accent);
  background-clip:content-box;
}
.inventory-title i img,
.inventory-title .inventory-badge img{
  width:60%;
  height:60%;
  object-fit:contain;
  display:block;
  filter:brightness(0) saturate(100%) invert(7%) sepia(6%) saturate(441%) hue-rotate(148deg) brightness(91%) contrast(94%);
}
.close-button{
  width:1.375rem;
  height:1.375rem;
  background:transparent;
  border:none;
  color:var(--tx-dim);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:color .15s;
}
.close-button:hover{color:#fff}

/* =========================
   WEIGHT BAR
   ========================= */
.weight-bar-wrapper{
  display:grid;
  grid-template-columns:auto 1fr;
  grid-template-rows:auto auto;
  column-gap:0.5rem;
  align-items:center;
  background:transparent;
  border:0;
  border-radius:0;
  padding:0;
}
.weight-bar-wrapper i{grid-row:1/span 2;color:#fff;font-size:0.8125rem;opacity:.9}
.weight-info{min-width:10.625rem}
.weight-text{margin:0 0 0.25rem 0;color:#fff;font-size:0.75rem;font-weight:800;letter-spacing:0.01875rem;text-align:right}
.weight-bar{width:100%;height:0.625rem;border-radius:0.1875rem;overflow:hidden;background:repeating-linear-gradient(90deg,rgba(255,255,255,.18) 0 0.375rem,rgba(255,255,255,.06) 0.375rem 0.625rem)}
.weight-bar-fill{height:100%;border-radius:0.1875rem 0 0 0.1875rem;transition:width .25s linear;background:repeating-linear-gradient(90deg,#ffffff 0 0.375rem,rgba(255,255,255,0) 0.375rem 0.625rem)}
.weight-bar-fill.medium{filter:hue-rotate(-50deg) saturate(1.2)}
.weight-bar-fill.high{filter:hue-rotate(-110deg) saturate(1.2)}

/* =========================
   GRID & SLOTS
   ========================= */
.item-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:0.375rem}

.item-slot,.backpack-slot{
  aspect-ratio:1;
  position:relative;
  overflow:hidden;
  cursor:pointer;
  border-radius:var(--r-1);
  background:linear-gradient(180deg,var(--slot-bg) 0%,var(--slot-bg-2) 100%);
  border:0.0625rem solid var(--slot-bdr);
  box-shadow:inset 0 0 0.75rem rgba(0,0,0,.26),inset 0 0.0625rem 0 var(--slot-edge);
  transition:border-color .12s linear,background-color .12s linear;
}
.item-slot::before,.backpack-slot::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:radial-gradient(ellipse at 50% 55%,rgba(255,255,255,0.062) 0%,rgba(255,255,255,.06) 20%,rgba(0,0,0,0) 55%),radial-gradient(ellipse at 50% 70%,rgba(0,0,0,.10) 0%,rgba(0,0,0,0) 60%);
  mix-blend-mode:screen;
}
.item-slot:hover,.backpack-slot:hover{border-color:var(--slot-hover-border);box-shadow:inset 0 0.0625rem 0 rgba(255,255,255,.08),0 0 0 0.0625rem var(--slot-hover-outline),0 0 0.625rem var(--shadow-slot)}
.item-slot.has-item,.backpack-slot.has-item{border-color:var(--slot-has-item-border);background:linear-gradient(180deg,#151a1ba6 0%,#10141686 100%)}

.item-slot[data-hotkey]::after{
  content: attr(data-hotkey);
  position:absolute;
  top:0.25rem;
  left:0.25rem;
  background:var(--accent);
  color:#0e0e0e;
  font-size:0.625rem;
  font-weight:900;
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
  line-height:1;
  pointer-events:none;
  user-select:none;
  z-index:3;
  opacity:.65;
  will-change: contents, transform, opacity;
}
.item-slot.has-item[data-hotkey]::after{opacity:1}
.item-slot.dragging[data-hotkey]::after {display:none}

.hotbar-slot[data-hotkey]::after{
  left:auto;
  right:0.25rem;
  min-width:1.125rem;
  text-align:center;
  background:rgba(40, 40, 40, 0.466);
  color:#fff;
  font-size:0.6875rem;
}

.item-slot-amount{
  position:absolute;
  top:0.25rem;
  right:0.25rem;
  background:rgba(0,0,0,.75);
  color:#fff;
  font-size:0.625rem;
  font-weight:800;
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
  line-height:1;
  z-index:3;
}
.item-slot-content{position:absolute;inset:0}
.item-slot-img{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:70%;
  height:70%;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1;
}
.item-slot-img img{max-width:100%;max-height:100%;object-fit:contain}
.item-slot-footer{
  position:absolute;
  left:0.375rem;
  right:0.375rem;
  bottom:0.375rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  z-index:2;
}
.item-name{color:#fff;font-size:0.625rem;font-weight:800;text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.15;text-shadow:0.0625rem 0.0625rem 0.125rem rgba(0,0,0,.85);flex:1}
.item-weight{color:var(--tx-dim);font-size:0.5625rem;font-weight:700;line-height:1;margin-left:0.375rem;white-space:nowrap;text-shadow:0.0625rem 0.0625rem 0.125rem rgba(0,0,0,.85)}

.item-slot-durability{position:absolute;left:0;right:0;bottom:0;height:0.1875rem;background:rgba(0,0,0,.6);z-index:2}
.item-slot-durability-fill{height:100%;transition:width .25s linear}
.item-slot-durability-fill.high{background:var(--accent-health-high)}
.item-slot-durability-fill.medium{background:#ffa726}
.item-slot-durability-fill.low{background:#ef5350}

.is-dragging .item-slot,.is-dragging .backpack-slot,.is-dragging .utility-slot{transition:none!important}

.item-price{
  position:absolute;
  top:0.25rem;
  left:0.25rem;
  z-index:3;
  display:flex;
  align-items:center;
  gap:0.25rem;
  background:rgba(76,175,80,.92);
  color:#fff;
  font-size:0.5625rem;
  font-weight:900;
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
}

.item-rarity,.item-slot-header{display:none!important}

/* =========================
   UTILITY SLOTS
   ========================= */
.utility-slot{
  width:6.25rem;
  aspect-ratio:1;
  position:relative;
  overflow:hidden;
  border-radius:var(--r-1);
  background:linear-gradient(180deg,var(--slot-bg) 0%,var(--slot-bg-2) 100%);
  border:0.0625rem solid var(--slot-bdr);
  box-shadow:inset 0 0 1.125rem rgba(0,0,0,.32),inset 0 0.0625rem 0 var(--slot-edge);
  transition:border-color .08s linear,box-shadow .09s linear,background-color .08s linear,transform .06s ease;
  cursor:pointer;
}
.utility-slot:hover{border-color:var(--slot-hover-border);box-shadow:inset 0 0.0625rem 0 rgba(255,255,255,.08),0 0 0 0.0625rem var(--slot-hover-outline),0 0 0.625rem var(--shadow-slot)}
.utility-slot.has-item{background:linear-gradient(180deg,#151a1ba6 0%,#10141686 100%);border-color:var(--slot-has-item-border)}
.utility-slot.drag-over{border-color:var(--drag-border, var(--accent));box-shadow:0 0 0.75rem var(--accent-grad-35)}
.utility-slot-label{
  position:absolute;
  top:0.25rem;
  left:50%;
  transform:translateX(-50%);
  background:var(--accent-grad-12);
  border:0.0625rem solid var(--accent-grad-22);
  color:var(--accent-label);
  font-size:0.5rem;
  font-weight:900;
  text-transform:uppercase;
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
  z-index:2;
  letter-spacing:0.01875rem;
}
.utility-slot .item-slot-img{width:72%;height:72%}
.utility-slot .item-slot-amount{top:0.25rem;right:0.25rem}
.utility-slot .item-slot-footer{left:0.375rem;right:0.375rem;bottom:0.375rem}
.utility-slot-icon{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  opacity:.45;
  pointer-events:none;
  transition:opacity .2s,transform .2s;
  z-index:0;
}
.utility-slot.has-item .utility-slot-icon{opacity:.06}
.utility-slot:not(.has-item):hover .utility-slot-icon{opacity:.25;transform:translate(-50%,-50%) scale(1.06)}

/* =========================
   HOTBAR (BOTTOM CENTER)
   ========================= */
.hotbar-container{position:fixed;left:50%;bottom:1.5625rem;transform:translateX(-50%);z-index:100}
.hotbar{display:flex;gap:0.5rem;background:transparent;border:0;padding:0}
.hotbar-slot{width:6.875rem;height:6.875rem;background:linear-gradient(180deg,#7e7e7e3b 0%,#47474756 100%);border:0.125rem solid rgba(143,143,143,.12);border-radius:var(--r-1);position:relative;overflow:hidden}
.hotbar-slot.has-item{background:linear-gradient(180deg,#61606049 0%,#47474771 100%);border-color:#475253}
.hotbar-slot .item-slot-amount{bottom:0.5rem;top:auto;left:0.25rem;right:auto;background:transparent}
.hotbar-slot .item-slot-img{width:60%;height:60%;margin-top:0.21875rem}
.hotbar-slot .item-slot-footer{top:0.375rem;bottom:auto;left:1.5rem;right:1.5rem;display:flex;flex-direction:column;align-items:center}
.hotbar-slot .item-name{text-align:center;width:100%;text-shadow:0.0625rem 0.0625rem 0.125rem rgba(0,0,0,.9)}
.hotbar-slot .item-weight{margin-top:0.0625rem;text-shadow:0.0625rem 0.0625rem 0.125rem rgba(0,0,0,.9)}
.hotbar-slot .item-slot-durability{height:0.1875rem}

/* =========================
   SPLIT DIALOG
   ========================= */
.split-dialog{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2000}
.split-content{background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);padding:1.25rem 1.5rem;min-width:17.5rem;box-shadow:var(--shadow-card)}
.split-content h3{text-align:center;color:#fff;font-size:1.125rem;font-weight:900;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.075rem}
.split-input-group{margin-bottom:1rem}
.split-input-group label{color:var(--tx-dim);font-size:0.6875rem;font-weight:900;margin-bottom:0.375rem;text-transform:uppercase}
.split-input-group input{width:100%;background:rgba(0,0,0,.55);border:0.0625rem solid #3c4446;border-radius:var(--r-1);padding:0.625rem 0.75rem;color:#fff;font-size:1rem;font-weight:900;text-align:center;outline:none;transition:border-color .15s}
.split-input-group input:focus{border-color:var(--accent)}
.split-slider{display:flex;justify-content:center;gap:0.25rem;margin-top:0.625rem}
.slider-marker{width:0.375rem;height:0.375rem;background:rgba(100,115,105,.45);border-radius:50%}
.slider-marker.active{background:var(--accent)}
.split-buttons{display:flex;gap:0.5rem;margin-bottom:1rem}
.split-buttons button{flex:1;background:var(--accent-grad-12);border:0.0625rem solid var(--accent-grad-28);border-radius:var(--r-1);padding:0.5rem;color:var(--accent);font-size:0.75rem;font-weight:900;transition:all .15s}
.split-buttons button:hover{background:var(--accent-grad-20);border-color:var(--accent)}
.split-actions{display:flex;gap:0.625rem}
.split-actions button{flex:1;padding:0.625rem;font-size:0.75rem;font-weight:900;text-transform:uppercase;border-radius:var(--r-1);transition:all .15s}
.btn-cancel{background:rgba(239,83,80,.15);border:0.0625rem solid rgba(239,83,80,.5);color:#ef5350}
.btn-cancel:hover{background:rgba(239,83,80,.25)}
.btn-split{background:var(--accent);border:0.0625rem solid var(--accent);color:#0e0e0e}
.btn-split:hover{filter:brightness(1.1)}

/* =========================
   CONTEXT MENU & DRAG
   ========================= */
.context-menu{position:fixed;z-index:10000;min-width:8.125rem;list-style:none;padding:0.25rem;background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);box-shadow:var(--shadow-card)}
.context-menu li{padding:0.5rem 0.75rem;color:#fff;font-size:0.75rem;font-weight:700;border-radius:0.125rem;transition:background .15s,color .15s;position:relative}
.context-menu li:hover{background:var(--accent-grad-16);color:var(--accent)}
.submenu{position:absolute;top:0;left:calc(95% + 0.125rem);display:none;min-width:6.25rem;list-style:none;padding:0.25rem;background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1)}
.context-menu li:hover .submenu{display:block}

.dragged-item{
  position:fixed;
  top:0;
  left:0;
  z-index:10000;
  pointer-events:none;
  opacity:.92;
  border:0.125rem solid var(--drag-border);
  border-radius:var(--r-1);
  box-shadow:0 0.375rem 1rem var(--drag-shadow);
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(180deg,var(--drag-bg-top) 0%,var(--drag-bg-bottom) 100%);
  will-change:transform;

}
.dragged-item .item-slot-img{
  width:80%;
  height:80%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.dragged-item .item-slot-img img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}
.dragged-item .item-slot-amount{
  position:absolute;
  top:0.375rem;
  right:0.375rem;
  background:var(--drag-amount-bg);
  padding:0.125rem 0.375rem;
  border-radius:0.25rem;
  font-size:0.75rem;
  font-weight:800;
  color:#fff;
  letter-spacing:0.025rem;
  box-shadow:0 0.125rem 0.375rem rgba(0,0,0,.35);
}

/* =========================
   NOTIFICATIONS
   ========================= */
.notification-container{
  position:fixed;
  left:0;
  right:0;
  bottom:5rem;
  transform:none;
  z-index:1000;
  display:flex;
  gap:0.5rem;
  justify-content:center;
  align-items:flex-end;
  pointer-events:none;
}
.notification-slot{
  width:8.125rem;
  height:8.125rem;
  background:linear-gradient(180deg,#7e7e7e3b 0%,#47474756 100%);
  border:0.125rem solid rgba(143,143,143,.12);
  border-radius:var(--r-1);
  box-shadow:0 0.25rem 0.75rem rgba(0,0,0,.2);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  position:relative;
  pointer-events:auto;
}
.notification-title{
  position:absolute;
  top:0.25rem;
  left:0.25rem;
  background:rgba(0,0,0,.14);
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
  z-index:3;
}
.notification-title p{
  color:#fff;
  font-size:0.5rem;
  font-weight:900;
  text-transform:uppercase;
  line-height:1;
  letter-spacing:0.01875rem;
}
.notification-slot .item-slot-img{
  width:95%;
  height:95%;
  // border-bottom:0.0625rem solid rgba(70,70,70,.5);
  padding:0.625rem;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.notification-slot .item-slot-img img{
  max-width:75%;
  max-height:75%;
  object-fit:contain;
}
.notification-slot .item-slot-amount{
  position:absolute;
  top:0.25rem;
  right:0.25rem;
  background:rgba(0,0,0,.7);
  padding:0.125rem 0.375rem;
  border-radius:0.125rem;
  z-index:3;
}
.notification-slot .item-slot-amount p{
  color:#fff;
  font-size:0.5625rem;
  font-weight:900;
  line-height:1;
}
.notification-slot .item-slot-label{
  position:absolute;
  left:50%;
  bottom:0.125rem;
  transform:translateX(-50%);
  padding:0.375rem 0.625rem;
  max-width:90%;
  background:rgba(70, 70, 70, 0);
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:0.25rem;
}
.notification-slot .item-slot-label p{
  color:#fff;
  font-size:0.75rem;
  font-weight:900;
  text-transform:uppercase;
  line-height:1.2;
  letter-spacing:0.01875rem;
  width:100%;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  text-shadow:0 0.125rem 0.1875rem rgba(0,0,0,.9);
}

/* =========================
   SHOP / STORE (RIGHT)
   ========================= */
.other-sections-wrapper .shop-panel{
  background:rgba(19,22,24,.66);
  border:0.0625rem solid rgba(255,255,255,.12);
  border-radius:0.75rem;
  box-shadow:0 1rem 2.5rem rgba(0,0,0,.35);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  height:auto;
  max-height:none;
}
.other-sections-wrapper .shop-panel:has(.basket-item){max-height:90vh}

.other-sections-wrapper .shop-inventory-header{
  padding:0.875rem 1rem 0.625rem;
  background:rgba(14,16,18,.75);
  border-bottom:0.0625rem solid rgba(255,255,255,.08);
}
.other-sections-wrapper .shop-inventory-header::after{
  content:"";
  display:block;
  height:0.1875rem;
  margin:0.5rem 0 0;
  background:linear-gradient(90deg,rgba(255,255,255,.14),rgba(255,255,255,0));
  border-radius:0.125rem;
}
.other-sections-wrapper .header-content{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.375rem}
.other-sections-wrapper .inventory-title{display:flex;align-items:center;gap:0.625rem;font:800 0.875rem var(--font);text-transform:uppercase}
.other-sections-wrapper .inventory-badge{width:1.875rem;height:1.875rem;display:grid;place-items:center;border-radius:0.375rem;background-color:var(--accent)}
.other-sections-wrapper .inventory-badge img{width:70%;height:70%}

.other-sections-wrapper .shop-controls{
  display:flex;align-items:center;gap:0.75rem;padding:0.75rem 1rem;
  background:rgba(14,16,18,.75);border-top:0.0625rem solid rgba(255,255,255,.08);border-bottom:0.0625rem solid rgba(255,255,255,.08)
}
.other-sections-wrapper .shop-search{flex:1;display:flex;align-items:center;gap:0.5rem;padding:0.625rem 0.75rem;border-radius:0.5rem;background:rgba(0,0,0,.35);border:0.0625rem solid rgba(255,255,255,.12)}
.other-sections-wrapper .shop-search input{flex:1;background:transparent;border:0;outline:none;color:#fff;font:600 0.8125rem var(--font)}
.other-sections-wrapper .shop-qty-global{display:flex;align-items:center;gap:0.5rem}
.other-sections-wrapper .shop-qty-global label{color:#cbd4d1;font:900 0.6875rem var(--font);text-transform:uppercase}
.other-sections-wrapper .qty-box{display:flex;align-items:center;gap:0.375rem;padding:0.375rem;background:rgba(0,0,0,.35);border:0.0625rem solid rgba(255,255,255,.12);border-radius:0.625rem}
.other-sections-wrapper .qty-box input{width:4.5rem;text-align:center;background:transparent;border:0;outline:none;color:#fff;font:800 0.875rem var(--font)}
.other-sections-wrapper .qty-box button{width:2rem;height:2rem;display:grid;place-items:center;border-radius:0.5rem;background:rgba(255,255,255,.08);border:0.0625rem solid rgba(255,255,255,.18);color:#fff}

.other-sections-wrapper .shop-cats{display:flex;flex-wrap:wrap;gap:0.5rem;padding:0.625rem 1rem;background:rgba(14,16,18,.75);border-bottom:0.0625rem solid rgba(255,255,255,.08)}
.other-sections-wrapper .cat-pill{padding:0.4375rem 0.75rem;border-radius:0.625rem;font:900 0.6875rem var(--font);text-transform:uppercase;letter-spacing:0.025rem;background:rgba(255,255,255,.08);color:#fff;border:0.0625rem solid rgba(255,255,255,.18);cursor:pointer}
.other-sections-wrapper .cat-pill.active{background:var(--accent-lime);color:#0c0e0d;border-color:var(--accent-lime)}

.other-sections-wrapper .shop-grid{
  padding:0.75rem 1rem;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:0.75rem;
  overflow:auto;
  flex:1 1 auto;

  align-content:start;
  grid-auto-flow:row dense;
  grid-auto-rows:6.875rem;
  max-height: calc((6.875rem * 4) + (0.75rem * 3));
}
@media (min-width:93.75rem){.other-sections-wrapper .shop-grid{grid-template-columns:repeat(5,1fr)}}

.other-sections-wrapper .shop-card{
  position:relative;
  height:100%;
  border-radius:0.625rem;
  overflow:hidden;
  background:radial-gradient(120% 70% at 50% -10%,rgba(255,255,255,.06),transparent 55%),linear-gradient(180deg,#0F1214,#0B0E10);
  border:0.0625rem solid rgba(255,255,255,.08);
  box-shadow:inset 0 0 1.25rem rgba(0,0,0,.45);
  transition:transform .08s ease,border-color .08s;
  cursor:grab;

  display:flex;
  flex-direction:column;
}
.other-sections-wrapper .shop-card:hover{transform:translateY(-0.125rem);border-color:rgba(255,255,255,.18)}
.other-sections-wrapper .shop-price{position:absolute;top:0.5rem;left:0.5rem;padding:0.1875rem 0.4375rem;border-radius:0.5rem;background:rgba(0,0,0,.55);color:#fff;font:900 0.6875rem var(--font);border:0.0625rem solid rgba(255,255,255,.18)}
.other-sections-wrapper .shop-amount{position:absolute;top:0.5rem;right:0.5rem;padding:0.1875rem 0.4375rem;border-radius:0.5rem;background:rgba(0,0,0,.55);color:#fff;font:800 0.6875rem var(--font);border:0.0625rem solid rgba(255,255,255,.18)}
.other-sections-wrapper .shop-img{flex:1 1 auto;display:grid;place-items:center}
.other-sections-wrapper .shop-img img{max-width:78%;max-height:78%;object-fit:contain}
.other-sections-wrapper .shop-footer{position:absolute;left:0.625rem;right:0.625rem;bottom:0.625rem;display:flex;align-items:center;justify-content:space-between}
.other-sections-wrapper .shop-name{color:#fff;font:900 0.75rem var(--font);text-shadow:0 0.0625rem 0.125rem rgba(0,0,0,.8)}
.other-sections-wrapper .shop-weight{color:#cbd4d1;font:800 0.625rem var(--font)}

.other-sections-wrapper .cart-section{
  padding:0.875rem 1rem 1.125rem;
  border-top:0.0625rem solid rgba(255,255,255,.12);
  background:rgba(10,12,14,.65);
  margin-top:auto;
  flex-shrink:0;
  position:relative;
}
.other-sections-wrapper .basket-dock.highlight-drop{
  outline:0.125rem solid var(--accent);
  box-shadow:0 0 1.125rem var(--accent-glow-28);
}
.other-sections-wrapper .cart-header{color:#fff;font:900 0.875rem var(--font);margin-bottom:0.625rem}
.other-sections-wrapper .cart-divider{height:0.75rem;border-bottom:0.0625rem solid rgba(255,255,255,.14);margin-bottom:0.625rem}
.other-sections-wrapper .cart-list{
  max-height:24vh;
  overflow:auto;
  padding-right:0.5rem;
  position:relative;
}
.other-sections-wrapper .cart-list::after{
  content:"";
  position:absolute;
  top:0;
  right:0.125rem;
  width:0.1875rem;
  height:100%;
  background:linear-gradient(180deg,var(--accent-grad-top),var(--accent-grad-bottom));
  border-radius:0.375rem;
  opacity:.9;
  pointer-events:none;
}
.other-sections-wrapper .cart-list::-webkit-scrollbar{width:0.375rem}
.other-sections-wrapper .cart-list::-webkit-scrollbar-thumb{background:rgba(255,255,255,.22);border-radius:0.1875rem}

.other-sections-wrapper .cart-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:0.875rem;
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
  border:0.0625rem solid rgba(255,255,255,.14);
  border-radius:0.75rem;
  padding:0.875rem;
  margin:0.625rem 0;
  box-shadow:0 0.5rem 1.25rem rgba(0,0,0,.25);
}
.other-sections-wrapper .cart-left{display:flex;align-items:center;gap:0.75rem;min-width:0}
.other-sections-wrapper .cart-thumb{width:3.5rem;height:3.5rem;border-radius:0.625rem;background:radial-gradient(90% 70% at 50% 20%,rgba(255,255,255,.08),transparent 55%),rgba(0,0,0,.35);display:grid;place-items:center;border:0.0625rem solid rgba(255,255,255,.16)}
.other-sections-wrapper .cart-thumb img{max-width:86%;max-height:86%}
.other-sections-wrapper .cart-meta{display:flex;flex-direction:column;gap:0.1875rem;min-width:0}
.other-sections-wrapper .cart-name{color:#fff;font:900 0.875rem var(--font);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.other-sections-wrapper .cart-right{display:flex;align-items:center;gap:0.625rem;flex-shrink:0}
.other-sections-wrapper .qty-inline{display:grid;grid-template-columns:2rem 4rem 2rem;gap:0.375rem;padding:0.375rem;background:rgba(0,0,0,.35);border:0.0625rem solid rgba(255,255,255,.18);border-radius:0.625rem}
.other-sections-wrapper .qty-inline input{width:4rem;text-align:center;background:transparent;border:0;outline:none;color:#fff;font:800 0.8125rem var(--font);-moz-appearance:textfield}
.other-sections-wrapper .qty-inline input::-webkit-outer-spin-button,
.other-sections-wrapper .qty-inline input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
.other-sections-wrapper .qty-inline button{width:2rem;height:2rem;display:grid;place-items:center;color:#fff;background:rgba(255,255,255,.08);border:0.0625rem solid rgba(255,255,255,.18);border-radius:0.5rem}

.other-sections-wrapper .price-chip{min-width:4.125rem;text-align:center;padding:0.5rem 0.625rem;border-radius:0.625rem;background:rgba(0,0,0,.55);border:0.0625rem solid rgba(255,255,255,.18);color:#fff;font:900 0.8125rem var(--font)}
.other-sections-wrapper .icon-btn{width:2.25rem;height:2.25rem;display:grid;place-items:center;border-radius:0.625rem;border:0.0625rem solid rgba(255,255,255,.18);background:rgba(255,255,255,.08);color:#fff}
.other-sections-wrapper .icon-btn.danger{border-color:rgba(239,83,80,.45);color:#ef8884;background:rgba(239,83,80,.12)}

.other-sections-wrapper .total-line{display:flex;align-items:center;justify-content:space-between;margin:0.875rem 0.125rem 0.625rem;color:#cfd8d5;font:900 0.75rem var(--font)}
.other-sections-wrapper .total-line strong{color:#fff;font-size:1.25rem}
.other-sections-wrapper .pay-actions{display:flex;gap:0.625rem;padding-top:0.125rem}
.other-sections-wrapper .btn-pay{flex:1;display:flex;align-items:center;justify-content:center;gap:0.5rem;padding:0.75rem 0.875rem;border-radius:0.625rem;font:900 0.8125rem var(--font);border:0.0625rem solid rgba(255,255,255,.18);background:rgba(255,255,255,.08);color:#fff}
.other-sections-wrapper .btn-pay.bank i{opacity:.85}
.other-sections-wrapper .btn-pay.cash{background:var(--accent);border-color:rgba(92,185,69,.329);color:#EAFCD9;box-shadow:inset 0 0 0 0.0625rem rgba(255,255,255,.06),0 0.375rem 1.25rem rgba(0,0,0,.25)}
.other-sections-wrapper .btn-pay:disabled{opacity:.5;cursor:not-allowed}

.shop-slot{cursor:grab}
.shop-slot:active{cursor:grabbing}
.shop-slot.selected{outline:0.125rem solid var(--accent);outline-offset:-0.125rem}

.material-symbols-rounded{font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 0,"opsz" 15;font-size:0.5625rem!important;line-height:1;display:inline-block;color:#ffffff63}
.other-sections-wrapper .shop-search .material-symbols-rounded{font-size:1rem!important;color:#cbd4d1;font-variation-settings:"FILL" 0,"wght" 500,"GRAD" 0,"opsz" 18}

.no-scrollbar{scrollbar-width:none!important;-ms-overflow-style:none!important}
.no-scrollbar::-webkit-scrollbar{width:0!important;height:0!important}

/* =========================
   GHOST QTY WIDGET
   ========================= */
.gqty{position:absolute;left:50%;bottom:0.5625rem;transform:translateX(-50%);z-index:120}
.gqty__wrap{display:flex;align-items:center;gap:0.5rem;padding:0.5rem 0.625rem;border-radius:0.75rem;background:rgba(0,0,0,.35);border:0.0625rem solid rgba(255,255,255,.18);box-shadow:0 0.5rem 1.25rem rgba(0,0,0,.25);transition:border-color .15s,box-shadow .15s,background .15s}
.gqty--active{border-color:var(--accent);box-shadow:0 0 0 0.0625rem rgba(178,242,89,.28),0 0.75rem 1.75rem rgba(0,0,0,.26);background:linear-gradient(180deg,rgba(17,20,22,.55),rgba(13,16,18,.55))}
.gqty__label{color:#cbd4d1;font:900 0.6875rem var(--font);text-transform:uppercase;letter-spacing:0.025rem;padding:0.25rem 0.375rem;border:0.0625rem solid rgba(255,255,255,.14);border-radius:0.5rem;background:rgba(255,255,255,.06)}
.gqty__input{width:5rem;text-align:center;color:#fff;background:transparent;border:0.0625rem solid rgba(255,255,255,.14);border-radius:0.625rem;padding:0.5rem 0.625rem;font:800 0.875rem var(--font);outline:none;transition:border-color .15s,background .15s;-moz-appearance:textfield}
.gqty__input:focus{border-color:var(--accent);background:rgba(0,0,0,.28)}
.gqty__input::-webkit-outer-spin-button,.gqty__input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
.gqty__btn,.gqty__clear{width:2.125rem;height:2.125rem;display:grid;place-items:center;color:#fff;background:rgba(255,255,255,.08);border:0.0625rem solid rgba(255,255,255,.18);border-radius:0.625rem;transition:filter .12s,transform .06s,border-color .12s,background .12s}
.gqty__btn:hover,.gqty__clear:hover{filter:brightness(1.08);border-color:rgba(255,255,255,.28)}
.gqty__btn:active,.gqty__clear:active{transform:translateY(0.0625rem)}
.gqty__clear{background:rgba(239,83,80,.12);border-color:rgba(239,83,80,.28)}
.gqty__clear:disabled{opacity:.45;cursor:not-allowed;transform:none}
.gqty .material-symbols-rounded{font-variation-settings:"FILL" 0,"wght" 500,"GRAD" 0,"opsz" 18;font-size:1rem!important;color:#cbd4d1}

/* =========================
   CRAFTING PANEL
   ========================= */
.crafting-panel{
  width:var(--panel-w);
  max-height:45rem;
  background:var(--surface-1);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-2);
  box-shadow:var(--shadow-card);
  padding:1.125rem 1.25rem 1.375rem;
  display:flex;
  flex-direction:column;
  gap:1.125rem;
}
.crafting-xp-banner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:0.875rem;
  padding:0.75rem 1rem;
  border-radius:var(--r-1);
  border:0.0625rem solid var(--accent-glow-28);
  background:linear-gradient(135deg, var(--accent-glow-22), var(--accent-glow-04));
  box-shadow:0 0.625rem 1.5rem rgba(0,0,0,.25);
}
.crafting-xp-info{
  display:flex;
  flex-direction:column;
  gap:0.125rem;
}
.crafting-xp-label{
  font-size:0.6875rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--tx-dim);
}
.crafting-xp-value{
  font-size:1.625rem;
  font-weight:600;
  letter-spacing:.04em;
  color:var(--accent);
  line-height:1;
}
.crafting-xp-caption{
  font-size:0.75rem;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:var(--tx-dim);
  text-align:right;
  flex-shrink:0;
}
.crafting-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:0.75rem;
}
.crafting-header h2{
  font-size:1.25rem;
  font-weight:600;
  letter-spacing:.04em;
  text-transform:uppercase;
  color:var(--tx);
}
.crafting-search input{
  background:var(--surface-0);
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-1);
  padding:0.5rem 0.75rem;
  min-width:11.25rem;
  color:var(--tx);
  font-family:var(--font);
  font-size:0.8125rem;
  transition:border .12s ease, box-shadow .12s ease;
}
.crafting-search input:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 0.125rem var(--accent-weak);
}
.crafting-body{display:flex;gap:1.125rem}
.crafting-list{
  width:44%;
  display:flex;
  flex-direction:column;
  gap:0.5rem;
  max-height:26.25rem;
  overflow-y:auto;
  padding-right:0.375rem;
}
.crafting-item{
  display:flex;
  align-items:center;
  gap:0.75rem;
  padding:0.625rem 0.75rem;
  border:0.0625rem solid var(--card-bdr);
  border-radius:var(--r-1);
  background:var(--surface-0);
  color:var(--tx);
  font-family:var(--font);
  text-align:left;
  transition:border .12s ease, box-shadow .12s ease, background .12s ease;
  cursor:pointer;
}
.crafting-item.disabled{opacity:.55;cursor:not-allowed}
.crafting-item.selected{
  border-color:var(--accent);
  box-shadow:var(--shadow-slot-glow);
  background:var(--accent-glow-08);
}
.crafting-item-thumb{
  width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;
  background:var(--surface-2);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);
}
.crafting-item-thumb img{width:2.5rem;height:2.5rem;object-fit:contain}
.crafting-item-details{display:flex;flex-direction:column;gap:0.1875rem;flex:1;min-width:0}
.crafting-item-title{font-size:0.875rem;font-weight:600;color:var(--tx)}
.crafting-item-meta{font-size:0.75rem;color:var(--tx-dim);letter-spacing:.02em}
.crafting-details{flex:1;display:flex;flex-direction:column;gap:1rem}
.crafting-preview{
  display:flex;gap:1rem;padding:0.875rem;background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);min-height:6.25rem;
}
.crafting-preview-thumb{
  width:5rem;height:5rem;display:flex;align-items:center;justify-content:center;background:var(--surface-2);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);
}
.crafting-preview-thumb img{width:4rem;height:4rem;object-fit:contain}
.crafting-preview-info{display:flex;flex-direction:column;gap:0.375rem;flex:1}
.crafting-preview-info h3{font-size:1.125rem;font-weight:600;color:var(--tx)}
.crafting-preview-info p{font-size:0.8125rem;color:var(--tx-dim);line-height:1.4}
.crafting-max{font-size:0.75rem;color:var(--tx-dim);letter-spacing:.06em;text-transform:uppercase}
.crafting-no-ingredients{font-size:0.875rem;color:var(--tx-dim);text-transform:uppercase;letter-spacing:.08em}
.crafting-ingredients{
  background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);padding:0.75rem;max-height:12.5rem;overflow-y:auto;display:flex;flex-direction:column;gap:0.375rem
}
.crafting-ingredients-header{display:flex;justify-content:space-between;font-size:0.6875rem;color:var(--tx-dim);text-transform:uppercase;letter-spacing:.08em;border-bottom:0.0625rem solid var(--bdr);padding-bottom:0.375rem;margin-bottom:0.375rem}
.crafting-ingredients-body{display:flex;flex-direction:column;gap:0.5rem}
.ingredient-row{display:flex;align-items:center;justify-content:space-between;font-size:0.8125rem;color:var(--tx)}
.ingredient-row.insufficient{color:var(--danger)}
.ingredient-label{font-weight:600;letter-spacing:.02em}
.ingredient-count{font-size:0.75rem;color:var(--tx-dim)}
.crafting-controls{display:flex;flex-direction:column;gap:1rem}
.crafting-amount{display:flex;align-items:center;justify-content:space-between;gap:0.75rem}
.crafting-amount-label{font-size:0.75rem;color:var(--tx-dim);letter-spacing:.08em;text-transform:uppercase}
.crafting-amount-input{display:flex;align-items:center;gap:0.625rem;background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);padding:0.375rem 0.625rem}
.crafting-amount-input button{width:2rem;height:2rem;border:0.0625rem solid var(--card-bdr);background:var(--surface-2);color:var(--tx);border-radius:var(--r-1);font-size:1.125rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:background .12s ease,border .12s ease}
.crafting-amount-input button:disabled{opacity:.45;cursor:not-allowed}
.crafting-amount-input button:not(:disabled):hover{background:var(--accent);color:#0e1a05}
.crafting-amount-input input{width:4.375rem;text-align:center;font-size:1rem;font-weight:600;color:var(--tx);background:transparent;border:none;outline:none}
.crafting-actions{display:flex;gap:0.75rem}
.crafting-queue-button{flex:1;background:var(--accent);border:none;border-radius:var(--r-1);padding:0.75rem 1.125rem;font-size:0.8125rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#0f1a06;cursor:pointer;transition:box-shadow .12s ease,transform .12s ease}
.crafting-queue-button:disabled{opacity:.45;cursor:not-allowed}
.crafting-queue-button:not(:disabled):hover{box-shadow:0 0.5rem 1.125rem var(--accent-glow-24);transform:translateY(-0.0625rem)}
.crafting-queue{display:flex;flex-direction:column;gap:0.625rem;margin-top:0.25rem}
.crafting-queue h3{font-size:0.8125rem;letter-spacing:.12em;text-transform:uppercase;color:var(--tx-dim)}
.crafting-queue-empty{font-size:0.8125rem;color:var(--tx-dim)}
.crafting-queue-items{display:flex;gap:0.75rem;overflow-x:auto;padding-bottom:0.375rem}
.crafting-queue-items::-webkit-scrollbar{height:0.375rem}
.crafting-queue-items::-webkit-scrollbar-thumb{background:var(--accent-glow-45);border-radius:0.1875rem}
.crafting-queue-items::-webkit-scrollbar-track{background:rgba(255,255,255,.08)}
.crafting-queue-card{min-width:12.5rem;background:var(--surface-0);border:0.0625rem solid var(--card-bdr);border-radius:var(--r-1);padding:0.75rem;display:flex;flex-direction:column;gap:0.625rem;box-shadow:0 0.375rem 0.875rem rgba(0,0,0,.18)}
.crafting-queue-card-header{display:flex;align-items:center;justify-content:space-between;gap:0.75rem}
.crafting-queue-card-title{font-size:0.875rem;font-weight:600;letter-spacing:.02em;color:var(--tx)}
.crafting-queue-remove{width:1.5rem;height:1.5rem;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(239,83,80,.14);color:#ff6f6f;font-weight:700;cursor:pointer;transition:background .12s ease,color .12s ease}
.crafting-queue-remove:hover{background:rgba(239,83,80,.24);color:#ff9b9b}
.crafting-queue-meta{display:flex;flex-direction:column;font-size:0.75rem;color:var(--tx-dim);gap:0.25rem}
.crafting-progress{width:100%;height:0.375rem;background:rgba(255,255,255,.08);border-radius:var(--r-pill);overflow:hidden}
.crafting-progress-fill{height:100%;background:var(--accent);box-shadow:0 0 0.75rem var(--accent-glow-45);transition:width .2s ease}

/* =========================
   WEAPON ATTACHMENTS
   ========================= */
.weapon-attachments{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:22.5rem;height:22.5rem;z-index:100}
.weapon-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:6.25rem;height:6.25rem;background:var(--surface-0);border:0.125rem solid var(--accent);border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:1}
.weapon{max-width:70%;max-height:70%;object-fit:contain}
.attachment-slot{position:absolute;width:3.75rem;height:3.75rem;background:linear-gradient(180deg,#151a1b 0%,#101416 100%);border:0.0625rem solid #3c4446;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:border-color .15s}
.attachment-slot:hover{border-color:var(--accent)}
.attachment-slot img{max-width:50%;max-height:50%}
.attachment-remove{position:absolute;top:-0.3125rem;right:-0.3125rem;width:1.125rem;height:1.125rem;background:#ef5350;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:0.5625rem;opacity:0;transition:opacity .2s}
.attachment-slot:hover .attachment-remove{opacity:1}
.attachment-slot:nth-child(2){transform:rotate(0deg) translate(8.75rem) rotate(0deg)}
.attachment-slot:nth-child(3){transform:rotate(60deg) translate(8.75rem) rotate(-60deg)}
.attachment-slot:nth-child(4){transform:rotate(120deg) translate(8.75rem) rotate(-120deg)}
.attachment-slot:nth-child(5){transform:rotate(180deg) translate(8.75rem) rotate(-180deg)}
.attachment-slot:nth-child(6){transform:rotate(240deg) translate(8.75rem) rotate(-240deg)}
.attachment-slot:nth-child(7){transform:rotate(300deg) translate(8.75rem) rotate(-300deg)}

/* =========================
   TOOLTIPS
   ========================= */
.v-popper--theme-tooltip .v-popper__inner{background:var(--surface-0)!important;border:0.0625rem solid var(--card-bdr)!important;border-radius:var(--r-1)!important;padding:0.625rem!important;max-width:16.25rem!important;color:#fff!important;font-family:var(--font)!important}
.v-popper--theme-tooltip .v-popper__arrow-outer{border-color:var(--card-bdr)!important}

/* =========================
   RESPONSIVE TWEAKS
   ========================= */
@media (max-height:56.25rem){
  .player-inventory-section .inventory-grid{max-height:var(--grid-max-h)}
  .backpack-grid{max-height:16.25rem}
  .other-sections-wrapper .shop-panel:has(.basket-item){max-height:82vh}
  .other-sections-wrapper .cart-list{max-height:20vh}
}
